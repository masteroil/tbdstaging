jQuery(function(s){if("undefined"==typeof wcsatt_cart_params)return!1;var t=s(document),n=s(document.body);t.on("change",".wcsatt-add-cart-to-subscription-action-input",function(){s("div.cart_totals");var t=s(this),c=t.closest(".wcsatt-add-cart-to-subscription-wrapper"),o=c.find(".wcsatt-add-cart-to-subscription-options");t.is(":checked")?(c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t={add_to_subscription_checked:t.is(":checked")?"yes":"no",action:"wcsatt_load_subscriptions_matching_cart"},s.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",t.action),t,function(t){"success"===t.result?(o.html(t.html),c.removeClass("closed"),c.addClass("open"),o.slideDown(200)):window.alert(wcsatt_cart_params.i18n_subs_load_error),c.unblock()})):(c.removeClass("open"),c.addClass("closed"),o.slideUp(200))}),t.on("click",".woocommerce-checkout .wcsatt-add-to-subscription-button",function(t){t.preventDefault();var t=s(this),c=t.closest(".wcsatt-add-cart-to-subscription-options"),o=s(".woocommerce-checkout form"),t=(o.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),{"add-cart-to-subscription":parseInt(t.val(),10),"add-to-subscription-checked":"yes",action:"wcsatt_add_cart_to_subscription_from_checkout",wcsatt_nonce:c.find("#wcsatt_nonce").val()}),a=(s.post(wcsatt_cart_params.wc_ajax_url.toString().replace("%%endpoint%%",t.action),t,function(t){"success"===t.result?a(t.url)&&(location.href=t.url):n.trigger("update_checkout"),o.unblock()}),function(t){try{return new URL(t),!0}catch(t){return!1}})})});